<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IDMAR Validador</title>
  <link rel="icon" href="img/logo-pm.png" />
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/theme-soft-light.v1.css">
  <link rel="stylesheet" href="css/nav-ribbon.v5.css">
</head>
<body>
  <main class="container">
    <h1 class="card-title" data-bi-pt="Validador" data-bi-en="Validator"></h1>

    <section class="two">
      <div class="panel">
        <h2 class="card-title" data-bi-pt="Validador Motor" data-bi-en="Engine Validator"></h2>
        <form id="formMotor">
          <label for="brand">Marca</label>
          <select id="brand" data-engine-field="brand">
            <option>Yamaha</option><option>Honda</option>
          </select>

          <div id="brandDynamic"></div>

          <div style="margin-top:.5rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.5rem">
            <div>
              <label>Modelo (pesquisa)</label>
              <input id="srch_model" type="text" placeholder="Ex.: F60"
                     data-engine-field="model_code"/>
            </div>
            <div>
              <label>Potência (hp)</label>
              <input id="srch_power" type="text" placeholder="Ex.: 60"
                     data-engine-field="power"/>
            </div>
          </div>

          <div style="margin:.5rem 0">
            <button id="btnMotor" type="submit">Validar Motor</button>
          </div>

          <link rel="stylesheet" href="./css/engine-family.css">
          <div class="ef-grid">
            <div class="ef-field">
              <label for="engineVersion" class="ef-label">Versão</label>
              <select id="engineVersion" class="ef-select"><option value="">—</option></select>
            </div>
            <div class="ef-field">
              <label for="enginePower" class="ef-label">Potência</label>
              <select id="enginePower" class="ef-select"><option value="">—</option></select>
            </div>
            <div class="ef-field">
              <label class="ef-label">Nº Série (intervalos)</label>
              <div id="engineSerialInfo"></div>
            </div>
          </div>
        </form>
      </div>
    </section>
  </main>

  <!-- PWA / SW (assume ficheiros já existem no teu repo) -->
  <link rel="manifest" href="./manifest.webmanifest">
  <script defer src="./js/sw-register.js"></script>

  <!-- Engine Picker unificado -->
  <link rel="stylesheet" href="./css/engine-picker.css">
  <script defer src="./js/engine-picker.js"></script>
  <div id="engine-picker"></div>
  
    <script>
  window.addEventListener('DOMContentLoaded', () => {
    EnginePicker.init({ dataUrl: './data/engines_catalog.v1.json' });
    console.log('[IDMAR] EnginePicker a usar ./data/engines_catalog.v1.json');
  });
</script>


  <!-- Brand fields -->
  <link rel="stylesheet" href="./css/engine-brand.css">
  <div id="engine-brand-fields"></div>
  <script defer src="./js/engine-brand-config.v1.js"></script>
  <script defer src="./js/engine-brand-fields.v1.js"></script>

  <!-- Family picker -->
  <script defer src="./js/engine-family-picker.v1.js"></script>

  <!-- Collect + bilingual -->
  <script defer src="./js/engine-collect.v1.js"></script>
  <script defer src="./js/i18n-bilingual.v1.js"></script>
</body>
</html>
